{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../square/square.component\";\nfunction BoardComponent_div_24_app_square_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-square\", 17);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_24_app_square_1_Template_app_square_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const j_r5 = restoredCtx.index;\n      const i_r2 = i0.ɵɵnextContext().index;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.makeMove(i_r2, j_r5));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const square_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", square_r4);\n  }\n}\nfunction BoardComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, BoardComponent_div_24_app_square_1_Template, 1, 1, \"app-square\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r1);\n  }\n}\nexport class BoardComponent {\n  constructor() {}\n  ngOnInit() {\n    this.newGame();\n  }\n  newGame() {\n    this.squares = [...Array(10)].map(e => Array(4));\n    this.valids = [];\n    this.winner = null;\n    this.xIsNext = true;\n    this.start = true;\n    this.playerO = 0;\n    this.playerX = 0;\n  }\n  get player() {\n    return this.xIsNext ? 'X' : 'O';\n  }\n  makeMove(idx, idy) {\n    if (!this.squares[idx][idy] && this.valids.some(a => a[0] === idx && a[1] === idy) || this.start) {\n      this.squares[idx].splice(idy, 1, [this.player, 0]);\n      // Check surrounding for potential points and exploration\n      for (let i = -1; i < 2; i++) {\n        for (let j = -1; j < 2; j++) {\n          if (!(i == 0 && j == 0)) {\n            var count = this.numConsecutive(i, j, idx, idy);\n            var points = this.computePoints(count);\n            this.glow(count, points, i, j, idx, idy);\n            this.explore(i + idx, j + idy);\n            this.playerX += this.xIsNext ? points : 0;\n            this.playerO += this.xIsNext ? 0 : points;\n          }\n        }\n      }\n      this.xIsNext = !this.xIsNext;\n      this.start = false;\n    }\n    this.winner = this.checkWinner();\n  }\n  glow(count, colorInd, i, j, idx, idy) {\n    if (count > 2) {\n      while (count > 0) {\n        var square = this.squares[idx][idy];\n        if (square != undefined) {\n          square[1] = colorInd;\n        }\n        idx += i;\n        idy += j;\n        count -= 1;\n      }\n    }\n  }\n  computePoints(count) {\n    return Math.floor(count / 3) * Math.pow(2, count - 3) * Math.pow(-1, Math.floor(count / 6));\n  }\n  // Returns number of consecutive like squares \n  numConsecutive(transX, transY, idx, idy) {\n    var count = 0;\n    while (this.bounded(idx, idy)) {\n      var square = this.squares[idx][idy];\n      if (square == undefined) {\n        break;\n      }\n      if (square != undefined && square[0] != this.player) {\n        break;\n      }\n      count += 1;\n      idx = idx + transX;\n      idy = idy + transY;\n    }\n    return count;\n  }\n  checkWinner() {\n    for (let i = 0; i < this.squares.length; i++) {\n      if (this.squares[i].includes(undefined)) {\n        return null;\n      }\n    }\n    if (this.playerX > this.playerO) {\n      return 'X';\n    }\n    return 'O';\n  }\n  explore(idx, idy) {\n    if (this.bounded(idx, idy) && !this.squares[idx][idy]) {\n      this.valids.push([idx, idy]);\n    }\n  }\n  bounded(idx, idy) {\n    return idx >= 0 && idy >= 0 && idx < this.squares.length && idy < this.squares[idx].length;\n  }\n}\nBoardComponent.ɵfac = function BoardComponent_Factory(t) {\n  return new (t || BoardComponent)();\n};\nBoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BoardComponent,\n  selectors: [[\"app-board\"]],\n  decls: 25,\n  vars: 3,\n  consts: [[1, \"wrapper-waves\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", 0, \"xmlns\", \"xlink\", \"http://www.w3.org/1999/xlink\", \"viewBox\", \"0 24 150 28\", \"preserveAspectRatio\", \"none\", \"shape-rendering\", \"auto\", 1, \"waves\"], [\"id\", \"gentle-wave\", \"d\", \"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z\"], [1, \"parallax\"], [0, \"xlink\", \"href\", \"#gentle-wave\", \"x\", \"48\", \"y\", \"0\", \"fill\", \"rgba(255,255,255,0.7)\"], [0, \"xlink\", \"href\", \"#gentle-wave\", \"x\", \"48\", \"y\", \"3\", \"fill\", \"rgba(255,255,255,0.5)\"], [0, \"xlink\", \"href\", \"#gentle-wave\", \"x\", \"48\", \"y\", \"5\", \"fill\", \"rgba(255,255,255,0.3)\"], [0, \"xlink\", \"href\", \"#gentle-wave\", \"x\", \"48\", \"y\", \"7\", \"fill\", \"#fff\"], [1, \"content\", \"flex\"], [1, \"btn\", 3, \"click\"], [\"x\", \"0\", \"y\", \"0\", \"fill\", \"none\", \"width\", \"100%\", \"height\", \"100%\"], [\"x\", \"50%\", \"y\", \"50%\", \"dominant-baseline\", \"middle\", \"text-anchor\", \"middle\", 1, \"scoreboard\"], [\"x\", \"50%\", \"y\", \"50%\", \"dominant-baseline\", \"middle\", \"text-anchor\", \"middle\", 1, \"default\"], [1, \"container\"], [\"class\", \"row\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"click\"]],\n  template: function BoardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\")(1, \"body\")(2, \"h1\");\n      i0.ɵɵtext(3, \"Five Row\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 0);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(5, \"svg\", 1)(6, \"defs\");\n      i0.ɵɵelement(7, \"path\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"g\", 3);\n      i0.ɵɵelement(9, \"use\", 4)(10, \"use\", 5)(11, \"use\", 6)(12, \"use\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(13, \"div\", 8)(14, \"p\");\n      i0.ɵɵtext(15, \"FiveRow | v.1.1.0 \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"main\");\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(17, \"svg\", 9);\n      i0.ɵɵlistener(\"click\", function BoardComponent_Template__svg_svg_click_17_listener() {\n        return ctx.newGame();\n      });\n      i0.ɵɵelement(18, \"rect\", 10);\n      i0.ɵɵelementStart(19, \"text\", 11);\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"text\", 12);\n      i0.ɵɵtext(22, \"Start New Game\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(23, \"div\", 13);\n      i0.ɵɵtemplate(24, BoardComponent_div_24_Template, 2, 1, \"div\", 14);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(20);\n      i0.ɵɵtextInterpolate2(\" X | \", ctx.playerX, \" : \", ctx.playerO, \" | O \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.squares);\n    }\n  },\n  dependencies: [i1.NgForOf, i2.SquareComponent],\n  styles: [\"@import\\\"https://fonts.googleapis.com/css?family=Roboto:400,100,900\\\";*[_ngcontent-%COMP%]{transition-property:all;transition-duration:.6s;transition-timing-function:ease}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%;background:#bb3530;font-family:Roboto,sans-serif;font-weight:400}h1[_ngcontent-%COMP%]{color:#fff;font-size:3.25em;font-weight:900;text-align:center;position:absolute;top:20px;left:0;right:0;margin:auto}@media (max-width: 768px){h1[_ngcontent-%COMP%]{font-size:24px}}main[_ngcontent-%COMP%]{position:relative;top:80px;align-items:center;display:flex;flex-direction:column}@media (max-width: 768px){main[_ngcontent-%COMP%]{top:60px}}.container[_ngcontent-%COMP%]{position:relative;top:80px;max-width:600px;max-height:400px;display:flex;flex-direction:column;flex:1;align-items:center;overflow-y:auto}@media (max-width: 768px){.container[_ngcontent-%COMP%]{max-width:400px;top:50px}}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1;align-items:center}.container[_ngcontent-%COMP%]   app-square[_ngcontent-%COMP%]{border:1px solid #fff}.btn[_ngcontent-%COMP%]{cursor:pointer;position:absolute;height:50px;width:250px;background:#b5332e}.btn[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-weight:100;fill:#fff;font-size:16px;text-transform:uppercase;word-spacing:10px;transition:all 1.35s cubic-bezier(.19,1,.22,1)}.btn[_ngcontent-%COMP%]   .default[_ngcontent-%COMP%]{opacity:0}.btn[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{color:#fff;stroke:#fff;stroke-width:2;stroke-dasharray:422,0;transition:all .35s linear}@media (max-width: 768px){.btn[_ngcontent-%COMP%]{height:30px;width:135px}.btn[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{font-size:10px}}.btn[_ngcontent-%COMP%]:hover{background:rgba(187,53,48,0)}.btn[_ngcontent-%COMP%]:hover   .scoreboard[_ngcontent-%COMP%]{opacity:0}.btn[_ngcontent-%COMP%]:hover   .default[_ngcontent-%COMP%]{opacity:1;font-weight:900;letter-spacing:1px}.btn[_ngcontent-%COMP%]:hover   rect[_ngcontent-%COMP%]{stroke-width:5;stroke-dasharray:15,310;stroke-dashoffset:48;transition:all 1.35s cubic-bezier(.19,1,.22,1)}.wapper[_ngcontent-%COMP%]{position:relative}.content[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:0;height:20vh;background-color:#fff;display:flex;justify-content:center;align-items:center;text-align:center;color:#000}.waves[_ngcontent-%COMP%]{position:absolute;bottom:20vh;width:100%;height:350px;margin-bottom:-6px}.parallax[_ngcontent-%COMP%] > use[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_move-forever 25s cubic-bezier(.55,.5,.45,.5) infinite}.parallax[_ngcontent-%COMP%] > use[_ngcontent-%COMP%]:nth-child(1){animation-delay:-2s;animation-duration:7s}.parallax[_ngcontent-%COMP%] > use[_ngcontent-%COMP%]:nth-child(2){animation-delay:-3s;animation-duration:10s}.parallax[_ngcontent-%COMP%] > use[_ngcontent-%COMP%]:nth-child(3){animation-delay:-4s;animation-duration:13s}.parallax[_ngcontent-%COMP%] > use[_ngcontent-%COMP%]:nth-child(4){animation-delay:-5s;animation-duration:20s}@keyframes _ngcontent-%COMP%_move-forever{0%{transform:translate3d(-90px,0,0)}to{transform:translate3d(85px,0,0)}}p[_ngcontent-%COMP%]{letter-spacing:1px;font-size:14px;color:#333}@media (max-width: 768px){.waves[_ngcontent-%COMP%]{height:150px;bottom:10vh}.content[_ngcontent-%COMP%]{height:10vh}p[_ngcontent-%COMP%]{font-size:10px}}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}